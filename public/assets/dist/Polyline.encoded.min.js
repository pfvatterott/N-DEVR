(function(){'use strict';var a=function(a){return a="number"==typeof a?{precision:a}:a||{},a.precision=a.precision||5,a.factor=a.factor||Math.pow(10,a.precision),a.dimension=a.dimension||2,a},b={encode:function(b,c){c=a(c);for(var d,e=[],f=0,g=b.length;f<g;++f)if(d=b[f],2===c.dimension)e.push(d.lat||d[0]),e.push(d.lng||d[1]);else for(var h=0;h<c.dimension;++h)e.push(d[h]);return this.encodeDeltas(e,c)},decode:function(b,c){c=a(c);for(var d,e=this.decodeDeltas(b,c),f=[],g=0,h=e.length;g+(c.dimension-1)<h;){d=[];for(var j=0;j<c.dimension;++j)d.push(e[g++]);f.push(d)}return f},encodeDeltas:function(b,c){c=a(c);for(var e=[],f=0,g=b.length;f<g;)for(var h=0;h<c.dimension;++h,++f){var j=b[f].toFixed(c.precision),k=j-(e[h]||0);e[h]=j,b[f]=k}return this.encodeFloats(b,c)},decodeDeltas:function(b,c){c=a(c);for(var e=[],f=this.decodeFloats(b,c),g=0,h=f.length;g<h;)for(var j=0;j<c.dimension;++j,++g)f[g]=Math.round((e[j]=f[g]+(e[j]||0))*c.factor)/c.factor;return f},encodeFloats:function(b,c){c=a(c);for(var d=0,e=b.length;d<e;++d)b[d]=Math.round(b[d]*c.factor);return this.encodeSignedIntegers(b)},decodeFloats:function(b,c){c=a(c);for(var d=this.decodeSignedIntegers(b),e=0,f=d.length;e<f;++e)d[e]/=c.factor;return d},encodeSignedIntegers:function(a){for(var b,c=0,d=a.length;c<d;++c)b=a[c],a[c]=0>b?~(b<<1):b<<1;return this.encodeUnsignedIntegers(a)},decodeSignedIntegers:function(a){for(var b,c=this.decodeUnsignedIntegers(a),d=0,e=c.length;d<e;++d)b=c[d],c[d]=1&b?~(b>>1):b>>1;return c},encodeUnsignedIntegers:function(a){for(var b="",c=0,d=a.length;c<d;++c)b+=this.encodeUnsignedInteger(a[c]);return b},decodeUnsignedIntegers:function(a){for(var c,d=[],e=0,f=0,g=0,h=a.length;g<h;++g)c=a.charCodeAt(g)-63,e|=(31&c)<<f,32>c?(d.push(e),e=0,f=0):f+=5;return d},encodeSignedInteger:function(a){return a=0>a?~(a<<1):a<<1,this.encodeUnsignedInteger(a)},encodeUnsignedInteger:function(a){for(var b,c="";32<=a;)b=(32|31&a)+63,c+=String.fromCharCode(b),a>>=5;return b=a+63,c+=String.fromCharCode(b),c}};if("object"==typeof module&&"object"==typeof module.exports&&(module.exports=b),"object"==typeof L){L.Polyline.prototype.fromEncoded||(L.Polyline.fromEncoded=function(a,c){return L.polyline(b.decode(a),c)}),L.Polygon.prototype.fromEncoded||(L.Polygon.fromEncoded=function(a,c){return L.polygon(b.decode(a),c)});var c={encodePath:function(){return b.encode(this.getLatLngs())}};L.Polyline.prototype.encodePath||L.Polyline.include(c),L.Polygon.prototype.encodePath||L.Polygon.include(c),L.PolylineUtil=b}})();